import { PageLayout } from '../components/PageLayout';

export default function EvolutionPage() {
    return <PageLayout title="Evolution System | DyGram">
        <EvolutionContent />
    </PageLayout>;
}

export function EvolutionContent() {
    return (
        <>
            <header style={{height: 'auto', padding: '4rem 0'}}>
                <div className="container">
                    <div className="tagline" style={{marginTop: '1rem'}}>
                        From LLM Exploration to Optimized Code
                    </div>
                </div>
            </header>

            <section>
                <div className="container">
                    <h2 className="section-title">Intelligent Task Evolution</h2>
                    <p style={{fontSize: '1.2rem', marginBottom: '3rem'}}>
                        DyGram tasks automatically evolve from flexible LLM-based execution to efficient,
                        cost-effective code as patterns emerge from repeated use.
                    </p>

                    <div className="feature-grid" style={{marginBottom: '4rem'}}>
                        <div className="feature">
                            <div style={{fontSize: '3rem', color: 'var(--primary)', marginBottom: '1rem'}}>ðŸ”¬</div>
                            <h3 className="feature-title">START EXPLORING</h3>
                            <p>
                                Begin with pure LLM execution. High flexibility, rapid prototyping,
                                zero upfront code.
                            </p>
                        </div>

                        <div className="feature">
                            <div style={{fontSize: '3rem', color: 'var(--primary)', marginBottom: '1rem'}}>ðŸ“ˆ</div>
                            <h3 className="feature-title">AUTOMATIC LEARNING</h3>
                            <p>
                                System observes execution patterns, tracks success rates,
                                and identifies opportunities for code generation.
                            </p>
                        </div>

                        <div className="feature">
                            <div style={{fontSize: '3rem', color: 'var(--primary)', marginBottom: '1rem'}}>âš¡</div>
                            <h3 className="feature-title">EVOLVE TO CODE</h3>
                            <p>
                                After 100+ successful executions at 90%+ success rate,
                                tasks automatically generate TypeScript code.
                            </p>
                        </div>
                    </div>

                    <h2 className="section-title">Four Evolution Stages</h2>
                    <p style={{fontSize: '1.1rem', marginBottom: '2rem'}}>
                        Tasks transition through four stages, each optimizing the balance between
                        flexibility and performance.
                    </p>

                    <div className="evolution" style={{marginBottom: '4rem'}}>
                        <div className="stage">
                            <div className="stage-header">
                                <div className="stage-number">01</div>
                                <h3 className="stage-title">LLM ONLY</h3>
                            </div>
                            <div className="stage-content">
                                <p style={{marginBottom: '1rem'}}><strong>Pure exploration phase</strong></p>
                                <p>Every execution uses the LLM. Highest flexibility and adaptability.
                                Gathers execution history for pattern learning.</p>
                                <div className="code-block" style={{marginTop: '1rem'}}>
                                    <pre style={{background: 'var(--code-bg)', color: 'var(--light)', padding: '1.5rem', overflowX: 'auto', borderRadius: '4px', fontSize: '0.9rem'}}>{`Task classify {
    prompt: "Classify: {{ input }}";
    evolution_stage: "llm_only";
}`}</pre>
                                </div>
                                <div style={{marginTop: '1rem', padding: '1rem', background: 'var(--light)', borderLeft: '4px solid var(--primary)'}}>
                                    <strong>Best for:</strong> Prototyping, exploring new domains, handling unpredictable inputs
                                </div>
                            </div>
                        </div>

                        <div className="stage">
                            <div className="stage-header">
                                <div className="stage-number">02</div>
                                <h3 className="stage-title">HYBRID</h3>
                            </div>
                            <div className="stage-content">
                                <p style={{marginBottom: '1rem'}}><strong>Learning phase with safety net</strong></p>
                                <p>Generated code handles common cases. Falls back to LLM when confidence
                                is below 80%. Balances cost and flexibility.</p>
                                <div className="code-block" style={{marginTop: '1rem'}}>
                                    <pre style={{background: 'var(--code-bg)', color: 'var(--light)', padding: '1.5rem', overflowX: 'auto', borderRadius: '4px', fontSize: '0.9rem'}}>{`Task classify {
    evolution_stage: "hybrid";
    code_path: "generated/classify_v123.ts";
}`}</pre>
                                </div>
                                <div style={{marginTop: '1rem', padding: '1rem', background: 'var(--light)', borderLeft: '4px solid var(--accent)'}}>
                                    <strong>Best for:</strong> Emerging patterns, gradual optimization, edge case handling
                                </div>
                            </div>
                        </div>

                        <div className="stage">
                            <div className="stage-header">
                                <div className="stage-number">03</div>
                                <h3 className="stage-title">CODE FIRST</h3>
                            </div>
                            <div className="stage-content">
                                <p style={{marginBottom: '1rem'}}><strong>Optimization phase</strong></p>
                                <p>Code handles most executions. LLM only assists when code confidence
                                drops below threshold (default 70%). Low cost with safety net.</p>
                                <div className="code-block" style={{marginTop: '1rem'}}>
                                    <pre style={{background: 'var(--code-bg)', color: 'var(--light)', padding: '1.5rem', overflowX: 'auto', borderRadius: '4px', fontSize: '0.9rem'}}>{`Task classify {
    evolution_stage: "code_first";
    code_path: "generated/classify_v456.ts";
    llm_threshold: "0.7";
}`}</pre>
                                </div>
                                <div style={{marginTop: '1rem', padding: '1rem', background: 'var(--light)', borderLeft: '4px solid var(--accent)'}}>
                                    <strong>Best for:</strong> Mature patterns with occasional edge cases, cost optimization
                                </div>
                            </div>
                        </div>

                        <div className="stage">
                            <div className="stage-header">
                                <div className="stage-number">04</div>
                                <h3 className="stage-title">CODE ONLY</h3>
                            </div>
                            <div className="stage-content">
                                <p style={{marginBottom: '1rem'}}><strong>Full maturity phase</strong></p>
                                <p>Pure code execution with no LLM fallback. Fastest performance,
                                lowest cost, deterministic behavior.</p>
                                <div className="code-block" style={{marginTop: '1rem'}}>
                                    <pre style={{background: 'var(--code-bg)', color: 'var(--light)', padding: '1.5rem', overflowX: 'auto', borderRadius: '4px', fontSize: '0.9rem'}}>{`Task classify {
    evolution_stage: "code_only";
    code_path: "generated/classify_v789.ts";
}`}</pre>
                                </div>
                                <div style={{marginTop: '1rem', padding: '1rem', background: 'var(--light)', borderLeft: '4px solid var(--primary)'}}>
                                    <strong>Best for:</strong> Well-understood domains, production workloads, cost-sensitive operations
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2 className="section-title">Key Features</h2>

                    <div className="feature-grid" style={{marginBottom: '4rem'}}>
                        <div className="feature">
                            <h3 className="feature-title">AUTOMATIC CODE GENERATION</h3>
                            <p>
                                System analyzes execution history and generates type-safe TypeScript code
                                with confidence scoring and proper error handling.
                            </p>
                        </div>

                        <div className="feature">
                            <h3 className="feature-title">BROWSER-COMPATIBLE STORAGE</h3>
                            <p>
                                IndexedDB, localStorage, and memory backends with unified API.
                                Automatically selects best available storage.
                            </p>
                        </div>

                        <div className="feature">
                            <h3 className="feature-title">MACHINE VERSIONING</h3>
                            <p>
                                Full version control with rollback capability. Track machine evolution
                                over time with performance metrics.
                            </p>
                        </div>

                        <div className="feature">
                            <h3 className="feature-title">PATTERN LIBRARY</h3>
                            <p>
                                Save and reuse learned behaviors across machines. Build a library
                                of proven patterns for common tasks.
                            </p>
                        </div>

                        <div className="feature">
                            <h3 className="feature-title">PERFORMANCE TRACKING</h3>
                            <p>
                                Monitor execution time, success rate, cost per execution,
                                and evolution history for all tasks.
                            </p>
                        </div>

                        <div className="feature">
                            <h3 className="feature-title">MANUAL EVOLUTION</h3>
                            <p>
                                Trigger evolution on-demand with <code>triggerEvolution()</code>
                                when you want control over the process.
                            </p>
                        </div>
                    </div>

                    <div style={{padding: '3rem', background: 'var(--primary)', color: 'white', borderRadius: '8px', marginBottom: '4rem'}}>
                        <h2 className="section-title" style={{fontSize: '2rem', marginBottom: '1.5rem', color: 'white'}}>Example Usage</h2>
                        <div className="code-block">
                            <pre style={{background: 'rgba(0,0,0,0.3)', color: 'white', padding: '1.5rem', overflowX: 'auto', borderRadius: '4px', fontSize: '0.9rem'}}>{`import { EvolutionaryExecutor } from 'dygram/language/task-evolution';
import { createStorage } from 'dygram/language/storage';

// Setup with automatic storage selection
const storage = createStorage();
const executor = new EvolutionaryExecutor(machineData, {}, storage);

// Execute many times - evolution happens automatically
for (let i = 0; i < 500; i++) {
    await executor.step();
}

// Check which tasks evolved
const mutations = executor.getMutations();
const evolutions = mutations.filter(m => m.type === 'task_evolution');
console.log(\`\${evolutions.length} tasks evolved\`);`}</pre>
                        </div>
                    </div>

                    <h2 className="section-title">Benefits</h2>

                    <div className="feature-grid">
                        <div className="feature">
                            <h3 className="feature-title">REDUCED COSTS</h3>
                            <p>
                                Tasks evolve from expensive LLM calls to free code execution.
                                Save 90%+ on API costs for mature workflows.
                            </p>
                        </div>

                        <div className="feature">
                            <h3 className="feature-title">FASTER EXECUTION</h3>
                            <p>
                                Code execution is 10-100x faster than LLM calls.
                                Mature tasks run in milliseconds instead of seconds.
                            </p>
                        </div>

                        <div className="feature">
                            <h3 className="feature-title">IMPROVED RELIABILITY</h3>
                            <p>
                                Generated code is deterministic and type-safe.
                                No more waiting for LLM responses or handling API errors.
                            </p>
                        </div>

                        <div className="feature">
                            <h3 className="feature-title">GRADUAL OPTIMIZATION</h3>
                            <p>
                                Evolution is automatic and gradual. Start prototyping immediately,
                                optimize production workloads over time.
                            </p>
                        </div>

                        <div className="feature">
                            <h3 className="feature-title">REUSABLE PATTERNS</h3>
                            <p>
                                Build a library of proven patterns. Share learned behaviors
                                across projects and teams.
                            </p>
                        </div>

                        <div className="feature">
                            <h3 className="feature-title">FULL TRANSPARENCY</h3>
                            <p>
                                Track metrics, inspect generated code, and understand
                                exactly when and why tasks evolve.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <section className="dark">
                <div className="container">
                    <h2 className="section-title">Learn More</h2>
                    <div style={{display: 'flex', gap: '2rem', flexWrap: 'wrap', marginTop: '2rem'}}>
                        <a href="api.html" className="btn">VIEW API DOCS â†’</a>
                        <a href="quick-start.html" className="btn btn-secondary">QUICK START â†’</a>
                        <a href="examples.html" className="btn btn-secondary">SEE EXAMPLES â†’</a>
                    </div>
                </div>
            </section>

            <footer>
                <div className="container">
                    <div className="footer-grid">
                        <div className="footer-links">
                            <h3>DOCUMENTATION</h3>
                            <ul>
                                <li><a href="quick-start.html">Quick Start</a></li>
                                <li><a href="grammar-reference.html">Grammar Reference</a></li>
                                <li><a href="examples.html">Examples</a></li>
                                <li><a href="integration.html">Integration</a></li>
                            </ul>
                        </div>
                        <div className="footer-links">
                            <h3>RESOURCES</h3>
                            <ul>
                                <li><a href="https://github.com/christopherdebeer/machine" target="_blank">GitHub</a></li>
                                <li><a href="vscode-extension.html">VS Code Extension</a></li>
                                <li><a href="api.html">API</a></li>
                                <li><a href="libraries.html">Libraries</a></li>
                            </ul>
                        </div>
                        <div className="footer-links">
                            <h3>COMMUNITY</h3>
                            <ul>
                                <li><a href="#">Discord</a></li>
                                <li><a href="#">Twitter</a></li>
                                <li><a href="blog.html">Blog</a></li>
                                <li><a href="events.html">Events</a></li>
                            </ul>
                        </div>
                    </div>
                    <div className="copyright">
                        &copy; 2025 DyGram. All rights reserved.
                    </div>
                </div>
            </footer>
        </>
    );
}
