{
  "$type": "Machine",
  "title": "complex example",
  "nodes": [
    {
      "$type": "Node",
      "name": "start",
      "attributes": [
        {
          "$type": "Attribute",
          "name": "initial",
          "value": "true",
          "$textRegion": {
            "offset": 65,
            "end": 79,
            "length": 14,
            "range": {
              "start": {
                "character": 4,
                "line": 4
              },
              "end": {
                "character": 18,
                "line": 4
              }
            },
            "assignments": {
              "name": [
                {
                  "offset": 65,
                  "end": 72,
                  "length": 7,
                  "range": {
                    "start": {
                      "character": 4,
                      "line": 4
                    },
                    "end": {
                      "character": 11,
                      "line": 4
                    }
                  }
                }
              ],
              "value": [
                {
                  "offset": 74,
                  "end": 78,
                  "length": 4,
                  "range": {
                    "start": {
                      "character": 13,
                      "line": 4
                    },
                    "end": {
                      "character": 17,
                      "line": 4
                    }
                  }
                }
              ]
            }
          }
        },
        {
          "$type": "Attribute",
          "name": "timeout",
          "value": "1000",
          "$textRegion": {
            "offset": 84,
            "end": 98,
            "length": 14,
            "range": {
              "start": {
                "character": 4,
                "line": 5
              },
              "end": {
                "character": 18,
                "line": 5
              }
            },
            "assignments": {
              "name": [
                {
                  "offset": 84,
                  "end": 91,
                  "length": 7,
                  "range": {
                    "start": {
                      "character": 4,
                      "line": 5
                    },
                    "end": {
                      "character": 11,
                      "line": 5
                    }
                  }
                }
              ],
              "value": [
                {
                  "offset": 93,
                  "end": 97,
                  "length": 4,
                  "range": {
                    "start": {
                      "character": 13,
                      "line": 5
                    },
                    "end": {
                      "character": 17,
                      "line": 5
                    }
                  }
                }
              ]
            }
          }
        }
      ],
      "nodes": [],
      "$textRegion": {
        "offset": 53,
        "end": 101,
        "length": 48,
        "range": {
          "start": {
            "character": 0,
            "line": 3
          },
          "end": {
            "character": 2,
            "line": 6
          }
        },
        "assignments": {
          "name": [
            {
              "offset": 53,
              "end": 58,
              "length": 5,
              "range": {
                "start": {
                  "character": 0,
                  "line": 3
                },
                "end": {
                  "character": 5,
                  "line": 3
                }
              }
            }
          ],
          "attributes": [
            {
              "offset": 65,
              "end": 79,
              "length": 14,
              "range": {
                "start": {
                  "character": 4,
                  "line": 4
                },
                "end": {
                  "character": 18,
                  "line": 4
                }
              }
            },
            {
              "offset": 84,
              "end": 98,
              "length": 14,
              "range": {
                "start": {
                  "character": 4,
                  "line": 5
                },
                "end": {
                  "character": 18,
                  "line": 5
                }
              }
            }
          ]
        }
      }
    },
    {
      "$type": "Node",
      "name": "processing",
      "attributes": [
        {
          "$type": "Attribute",
          "name": "retry",
          "value": "3",
          "$textRegion": {
            "offset": 119,
            "end": 128,
            "length": 9,
            "range": {
              "start": {
                "character": 4,
                "line": 8
              },
              "end": {
                "character": 13,
                "line": 8
              }
            },
            "assignments": {
              "name": [
                {
                  "offset": 119,
                  "end": 124,
                  "length": 5,
                  "range": {
                    "start": {
                      "character": 4,
                      "line": 8
                    },
                    "end": {
                      "character": 9,
                      "line": 8
                    }
                  }
                }
              ],
              "value": [
                {
                  "offset": 126,
                  "end": 127,
                  "length": 1,
                  "range": {
                    "start": {
                      "character": 11,
                      "line": 8
                    },
                    "end": {
                      "character": 12,
                      "line": 8
                    }
                  }
                }
              ]
            }
          }
        }
      ],
      "nodes": [],
      "$textRegion": {
        "offset": 102,
        "end": 131,
        "length": 29,
        "range": {
          "start": {
            "character": 0,
            "line": 7
          },
          "end": {
            "character": 2,
            "line": 9
          }
        },
        "assignments": {
          "name": [
            {
              "offset": 102,
              "end": 112,
              "length": 10,
              "range": {
                "start": {
                  "character": 0,
                  "line": 7
                },
                "end": {
                  "character": 10,
                  "line": 7
                }
              }
            }
          ],
          "attributes": [
            {
              "offset": 119,
              "end": 128,
              "length": 9,
              "range": {
                "start": {
                  "character": 4,
                  "line": 8
                },
                "end": {
                  "character": 13,
                  "line": 8
                }
              }
            }
          ]
        }
      }
    },
    {
      "$type": "Node",
      "name": "error",
      "attributes": [
        {
          "$type": "Attribute",
          "name": "maxRetries",
          "value": "3",
          "$textRegion": {
            "offset": 144,
            "end": 158,
            "length": 14,
            "range": {
              "start": {
                "character": 4,
                "line": 11
              },
              "end": {
                "character": 18,
                "line": 11
              }
            },
            "assignments": {
              "name": [
                {
                  "offset": 144,
                  "end": 154,
                  "length": 10,
                  "range": {
                    "start": {
                      "character": 4,
                      "line": 11
                    },
                    "end": {
                      "character": 14,
                      "line": 11
                    }
                  }
                }
              ],
              "value": [
                {
                  "offset": 156,
                  "end": 157,
                  "length": 1,
                  "range": {
                    "start": {
                      "character": 16,
                      "line": 11
                    },
                    "end": {
                      "character": 17,
                      "line": 11
                    }
                  }
                }
              ]
            }
          }
        }
      ],
      "nodes": [],
      "$textRegion": {
        "offset": 132,
        "end": 161,
        "length": 29,
        "range": {
          "start": {
            "character": 0,
            "line": 10
          },
          "end": {
            "character": 2,
            "line": 12
          }
        },
        "assignments": {
          "name": [
            {
              "offset": 132,
              "end": 137,
              "length": 5,
              "range": {
                "start": {
                  "character": 0,
                  "line": 10
                },
                "end": {
                  "character": 5,
                  "line": 10
                }
              }
            }
          ],
          "attributes": [
            {
              "offset": 144,
              "end": 158,
              "length": 14,
              "range": {
                "start": {
                  "character": 4,
                  "line": 11
                },
                "end": {
                  "character": 18,
                  "line": 11
                }
              }
            }
          ]
        }
      }
    },
    {
      "$type": "Node",
      "name": "complete",
      "attributes": [
        {
          "$type": "Attribute",
          "name": "final",
          "value": "true",
          "$textRegion": {
            "offset": 177,
            "end": 189,
            "length": 12,
            "range": {
              "start": {
                "character": 4,
                "line": 14
              },
              "end": {
                "character": 16,
                "line": 14
              }
            },
            "assignments": {
              "name": [
                {
                  "offset": 177,
                  "end": 182,
                  "length": 5,
                  "range": {
                    "start": {
                      "character": 4,
                      "line": 14
                    },
                    "end": {
                      "character": 9,
                      "line": 14
                    }
                  }
                }
              ],
              "value": [
                {
                  "offset": 184,
                  "end": 188,
                  "length": 4,
                  "range": {
                    "start": {
                      "character": 11,
                      "line": 14
                    },
                    "end": {
                      "character": 15,
                      "line": 14
                    }
                  }
                }
              ]
            }
          }
        }
      ],
      "nodes": [],
      "$textRegion": {
        "offset": 162,
        "end": 192,
        "length": 30,
        "range": {
          "start": {
            "character": 0,
            "line": 13
          },
          "end": {
            "character": 2,
            "line": 15
          }
        },
        "assignments": {
          "name": [
            {
              "offset": 162,
              "end": 170,
              "length": 8,
              "range": {
                "start": {
                  "character": 0,
                  "line": 13
                },
                "end": {
                  "character": 8,
                  "line": 13
                }
              }
            }
          ],
          "attributes": [
            {
              "offset": 177,
              "end": 189,
              "length": 12,
              "range": {
                "start": {
                  "character": 4,
                  "line": 14
                },
                "end": {
                  "character": 16,
                  "line": 14
                }
              }
            }
          ]
        }
      }
    }
  ],
  "edges": [
    {
      "$type": "Edge",
      "source": {
        "$ref": "#/nodes@0"
      },
      "segments": [
        {
          "$type": "EdgeSegment",
          "startType": "--",
          "label": "ready",
          "endType": "-->",
          "target": {
            "$ref": "#/nodes@1"
          },
          "$textRegion": {
            "offset": 227,
            "end": 250,
            "length": 23,
            "range": {
              "start": {
                "character": 6,
                "line": 18
              },
              "end": {
                "character": 29,
                "line": 18
              }
            },
            "assignments": {
              "startType": [
                {
                  "offset": 227,
                  "end": 229,
                  "length": 2,
                  "range": {
                    "start": {
                      "character": 6,
                      "line": 18
                    },
                    "end": {
                      "character": 8,
                      "line": 18
                    }
                  }
                }
              ],
              "label": [
                {
                  "offset": 230,
                  "end": 235,
                  "length": 5,
                  "range": {
                    "start": {
                      "character": 9,
                      "line": 18
                    },
                    "end": {
                      "character": 14,
                      "line": 18
                    }
                  }
                }
              ],
              "endType": [
                {
                  "offset": 236,
                  "end": 239,
                  "length": 3,
                  "range": {
                    "start": {
                      "character": 15,
                      "line": 18
                    },
                    "end": {
                      "character": 18,
                      "line": 18
                    }
                  }
                }
              ],
              "target": [
                {
                  "offset": 240,
                  "end": 250,
                  "length": 10,
                  "range": {
                    "start": {
                      "character": 19,
                      "line": 18
                    },
                    "end": {
                      "character": 29,
                      "line": 18
                    }
                  }
                }
              ]
            }
          }
        }
      ],
      "$textRegion": {
        "offset": 221,
        "end": 251,
        "length": 30,
        "range": {
          "start": {
            "character": 0,
            "line": 18
          },
          "end": {
            "character": 30,
            "line": 18
          }
        },
        "assignments": {
          "source": [
            {
              "offset": 221,
              "end": 226,
              "length": 5,
              "range": {
                "start": {
                  "character": 0,
                  "line": 18
                },
                "end": {
                  "character": 5,
                  "line": 18
                }
              }
            }
          ],
          "segments": [
            {
              "offset": 227,
              "end": 250,
              "length": 23,
              "range": {
                "start": {
                  "character": 6,
                  "line": 18
                },
                "end": {
                  "character": 29,
                  "line": 18
                }
              }
            }
          ]
        }
      }
    },
    {
      "$type": "Edge",
      "source": {
        "$ref": "#/nodes@1"
      },
      "segments": [
        {
          "$type": "EdgeSegment",
          "startType": "--",
          "label": "success",
          "endType": "-->",
          "target": {
            "$ref": "#/nodes@3"
          },
          "$textRegion": {
            "offset": 263,
            "end": 286,
            "length": 23,
            "range": {
              "start": {
                "character": 11,
                "line": 19
              },
              "end": {
                "character": 34,
                "line": 19
              }
            },
            "assignments": {
              "startType": [
                {
                  "offset": 263,
                  "end": 265,
                  "length": 2,
                  "range": {
                    "start": {
                      "character": 11,
                      "line": 19
                    },
                    "end": {
                      "character": 13,
                      "line": 19
                    }
                  }
                }
              ],
              "label": [
                {
                  "offset": 266,
                  "end": 273,
                  "length": 7,
                  "range": {
                    "start": {
                      "character": 14,
                      "line": 19
                    },
                    "end": {
                      "character": 21,
                      "line": 19
                    }
                  }
                }
              ],
              "endType": [
                {
                  "offset": 274,
                  "end": 277,
                  "length": 3,
                  "range": {
                    "start": {
                      "character": 22,
                      "line": 19
                    },
                    "end": {
                      "character": 25,
                      "line": 19
                    }
                  }
                }
              ],
              "target": [
                {
                  "offset": 278,
                  "end": 286,
                  "length": 8,
                  "range": {
                    "start": {
                      "character": 26,
                      "line": 19
                    },
                    "end": {
                      "character": 34,
                      "line": 19
                    }
                  }
                }
              ]
            }
          }
        }
      ],
      "$textRegion": {
        "offset": 252,
        "end": 287,
        "length": 35,
        "range": {
          "start": {
            "character": 0,
            "line": 19
          },
          "end": {
            "character": 35,
            "line": 19
          }
        },
        "assignments": {
          "source": [
            {
              "offset": 252,
              "end": 262,
              "length": 10,
              "range": {
                "start": {
                  "character": 0,
                  "line": 19
                },
                "end": {
                  "character": 10,
                  "line": 19
                }
              }
            }
          ],
          "segments": [
            {
              "offset": 263,
              "end": 286,
              "length": 23,
              "range": {
                "start": {
                  "character": 11,
                  "line": 19
                },
                "end": {
                  "character": 34,
                  "line": 19
                }
              }
            }
          ]
        }
      }
    },
    {
      "$type": "Edge",
      "source": {
        "$ref": "#/nodes@1"
      },
      "segments": [
        {
          "$type": "EdgeSegment",
          "startType": "--",
          "label": "failed",
          "endType": "-->",
          "target": {
            "$ref": "#/nodes@2"
          },
          "$textRegion": {
            "offset": 299,
            "end": 318,
            "length": 19,
            "range": {
              "start": {
                "character": 11,
                "line": 20
              },
              "end": {
                "character": 30,
                "line": 20
              }
            },
            "assignments": {
              "startType": [
                {
                  "offset": 299,
                  "end": 301,
                  "length": 2,
                  "range": {
                    "start": {
                      "character": 11,
                      "line": 20
                    },
                    "end": {
                      "character": 13,
                      "line": 20
                    }
                  }
                }
              ],
              "label": [
                {
                  "offset": 302,
                  "end": 308,
                  "length": 6,
                  "range": {
                    "start": {
                      "character": 14,
                      "line": 20
                    },
                    "end": {
                      "character": 20,
                      "line": 20
                    }
                  }
                }
              ],
              "endType": [
                {
                  "offset": 309,
                  "end": 312,
                  "length": 3,
                  "range": {
                    "start": {
                      "character": 21,
                      "line": 20
                    },
                    "end": {
                      "character": 24,
                      "line": 20
                    }
                  }
                }
              ],
              "target": [
                {
                  "offset": 313,
                  "end": 318,
                  "length": 5,
                  "range": {
                    "start": {
                      "character": 25,
                      "line": 20
                    },
                    "end": {
                      "character": 30,
                      "line": 20
                    }
                  }
                }
              ]
            }
          }
        }
      ],
      "$textRegion": {
        "offset": 288,
        "end": 319,
        "length": 31,
        "range": {
          "start": {
            "character": 0,
            "line": 20
          },
          "end": {
            "character": 31,
            "line": 20
          }
        },
        "assignments": {
          "source": [
            {
              "offset": 288,
              "end": 298,
              "length": 10,
              "range": {
                "start": {
                  "character": 0,
                  "line": 20
                },
                "end": {
                  "character": 10,
                  "line": 20
                }
              }
            }
          ],
          "segments": [
            {
              "offset": 299,
              "end": 318,
              "length": 19,
              "range": {
                "start": {
                  "character": 11,
                  "line": 20
                },
                "end": {
                  "character": 30,
                  "line": 20
                }
              }
            }
          ]
        }
      }
    },
    {
      "$type": "Edge",
      "source": {
        "$ref": "#/nodes@2"
      },
      "segments": [
        {
          "$type": "EdgeSegment",
          "startType": "--",
          "label": "retry < 3",
          "endType": "-->",
          "target": {
            "$ref": "#/nodes@0"
          },
          "$textRegion": {
            "offset": 326,
            "end": 350,
            "length": 24,
            "range": {
              "start": {
                "character": 6,
                "line": 21
              },
              "end": {
                "character": 30,
                "line": 21
              }
            },
            "assignments": {
              "startType": [
                {
                  "offset": 326,
                  "end": 328,
                  "length": 2,
                  "range": {
                    "start": {
                      "character": 6,
                      "line": 21
                    },
                    "end": {
                      "character": 8,
                      "line": 21
                    }
                  }
                }
              ],
              "label": [
                {
                  "offset": 329,
                  "end": 340,
                  "length": 11,
                  "range": {
                    "start": {
                      "character": 9,
                      "line": 21
                    },
                    "end": {
                      "character": 20,
                      "line": 21
                    }
                  }
                }
              ],
              "endType": [
                {
                  "offset": 341,
                  "end": 344,
                  "length": 3,
                  "range": {
                    "start": {
                      "character": 21,
                      "line": 21
                    },
                    "end": {
                      "character": 24,
                      "line": 21
                    }
                  }
                }
              ],
              "target": [
                {
                  "offset": 345,
                  "end": 350,
                  "length": 5,
                  "range": {
                    "start": {
                      "character": 25,
                      "line": 21
                    },
                    "end": {
                      "character": 30,
                      "line": 21
                    }
                  }
                }
              ]
            }
          }
        }
      ],
      "$textRegion": {
        "offset": 320,
        "end": 351,
        "length": 31,
        "range": {
          "start": {
            "character": 0,
            "line": 21
          },
          "end": {
            "character": 31,
            "line": 21
          }
        },
        "assignments": {
          "source": [
            {
              "offset": 320,
              "end": 325,
              "length": 5,
              "range": {
                "start": {
                  "character": 0,
                  "line": 21
                },
                "end": {
                  "character": 5,
                  "line": 21
                }
              }
            }
          ],
          "segments": [
            {
              "offset": 326,
              "end": 350,
              "length": 24,
              "range": {
                "start": {
                  "character": 6,
                  "line": 21
                },
                "end": {
                  "character": 30,
                  "line": 21
                }
              }
            }
          ]
        }
      }
    },
    {
      "$type": "Edge",
      "source": {
        "$ref": "#/nodes@2"
      },
      "segments": [
        {
          "$type": "EdgeSegment",
          "startType": "--",
          "label": "retry >= 3",
          "endType": "-->",
          "target": {
            "$ref": "#/nodes@3"
          },
          "$textRegion": {
            "offset": 358,
            "end": 386,
            "length": 28,
            "range": {
              "start": {
                "character": 6,
                "line": 22
              },
              "end": {
                "character": 34,
                "line": 22
              }
            },
            "assignments": {
              "startType": [
                {
                  "offset": 358,
                  "end": 360,
                  "length": 2,
                  "range": {
                    "start": {
                      "character": 6,
                      "line": 22
                    },
                    "end": {
                      "character": 8,
                      "line": 22
                    }
                  }
                }
              ],
              "label": [
                {
                  "offset": 361,
                  "end": 373,
                  "length": 12,
                  "range": {
                    "start": {
                      "character": 9,
                      "line": 22
                    },
                    "end": {
                      "character": 21,
                      "line": 22
                    }
                  }
                }
              ],
              "endType": [
                {
                  "offset": 374,
                  "end": 377,
                  "length": 3,
                  "range": {
                    "start": {
                      "character": 22,
                      "line": 22
                    },
                    "end": {
                      "character": 25,
                      "line": 22
                    }
                  }
                }
              ],
              "target": [
                {
                  "offset": 378,
                  "end": 386,
                  "length": 8,
                  "range": {
                    "start": {
                      "character": 26,
                      "line": 22
                    },
                    "end": {
                      "character": 34,
                      "line": 22
                    }
                  }
                }
              ]
            }
          }
        }
      ],
      "$textRegion": {
        "offset": 352,
        "end": 387,
        "length": 35,
        "range": {
          "start": {
            "character": 0,
            "line": 22
          },
          "end": {
            "character": 35,
            "line": 22
          }
        },
        "assignments": {
          "source": [
            {
              "offset": 352,
              "end": 357,
              "length": 5,
              "range": {
                "start": {
                  "character": 0,
                  "line": 22
                },
                "end": {
                  "character": 5,
                  "line": 22
                }
              }
            }
          ],
          "segments": [
            {
              "offset": 358,
              "end": 386,
              "length": 28,
              "range": {
                "start": {
                  "character": 6,
                  "line": 22
                },
                "end": {
                  "character": 34,
                  "line": 22
                }
              }
            }
          ]
        }
      }
    }
  ],
  "$textRegion": {
    "offset": 0,
    "end": 387,
    "length": 387,
    "range": {
      "start": {
        "character": 0,
        "line": 0
      },
      "end": {
        "character": 35,
        "line": 22
      }
    },
    "assignments": {
      "title": [
        {
          "offset": 8,
          "end": 25,
          "length": 17,
          "range": {
            "start": {
              "character": 8,
              "line": 0
            },
            "end": {
              "character": 25,
              "line": 0
            }
          }
        }
      ],
      "nodes": [
        {
          "offset": 53,
          "end": 101,
          "length": 48,
          "range": {
            "start": {
              "character": 0,
              "line": 3
            },
            "end": {
              "character": 2,
              "line": 6
            }
          }
        },
        {
          "offset": 102,
          "end": 131,
          "length": 29,
          "range": {
            "start": {
              "character": 0,
              "line": 7
            },
            "end": {
              "character": 2,
              "line": 9
            }
          }
        },
        {
          "offset": 132,
          "end": 161,
          "length": 29,
          "range": {
            "start": {
              "character": 0,
              "line": 10
            },
            "end": {
              "character": 2,
              "line": 12
            }
          }
        },
        {
          "offset": 162,
          "end": 192,
          "length": 30,
          "range": {
            "start": {
              "character": 0,
              "line": 13
            },
            "end": {
              "character": 2,
              "line": 15
            }
          }
        }
      ],
      "edges": [
        {
          "offset": 221,
          "end": 251,
          "length": 30,
          "range": {
            "start": {
              "character": 0,
              "line": 18
            },
            "end": {
              "character": 30,
              "line": 18
            }
          }
        },
        {
          "offset": 252,
          "end": 287,
          "length": 35,
          "range": {
            "start": {
              "character": 0,
              "line": 19
            },
            "end": {
              "character": 35,
              "line": 19
            }
          }
        },
        {
          "offset": 288,
          "end": 319,
          "length": 31,
          "range": {
            "start": {
              "character": 0,
              "line": 20
            },
            "end": {
              "character": 31,
              "line": 20
            }
          }
        },
        {
          "offset": 320,
          "end": 351,
          "length": 31,
          "range": {
            "start": {
              "character": 0,
              "line": 21
            },
            "end": {
              "character": 31,
              "line": 21
            }
          }
        },
        {
          "offset": 352,
          "end": 387,
          "length": 35,
          "range": {
            "start": {
              "character": 0,
              "line": 22
            },
            "end": {
              "character": 35,
              "line": 22
            }
          }
        }
      ]
    },
    "documentURI": "file:///Users/cdbeer/dev/machine/machine-lang/examples/complex.mach"
  },
  "$sourceText": "machine \"complex example\"\n\n// States with attributes\nstart {\n    initial: true;\n    timeout: 1000;\n};\nprocessing {\n    retry: 3;\n};\nerror {\n    maxRetries: 3;\n};\ncomplete {\n    final: true;\n};\n\n// Transitions with labels\nstart -- ready --> processing;\nprocessing -- success --> complete;\nprocessing -- failed --> error;\nerror -- \"retry < 3\" --> start;\nerror -- \"retry >= 3\" --> complete;"
}